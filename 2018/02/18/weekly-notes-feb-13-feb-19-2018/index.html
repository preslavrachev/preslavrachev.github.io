<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Weekly Notes (Feb 13th / Feb 19th, 2018)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=f593a58c15" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/amp/" />
    
    <meta property="og:site_name" content="Preslav&#x27;s Thoughts and Ramblings" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Weekly Notes (Feb 13th / Feb 19th, 2018)" />
    <meta property="og:description" content="I am quite happy. I managed to get quite a bit of work done on my personal projects. I also managed to publish two blog posts. As a starter, I finished writing My Thoughts on React Native. It ended up being quite a bit of an opinionated piece, even for" />
    <meta property="og:url" content="http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/" />
    <meta property="article:published_time" content="2018-02-18T17:26:33.000Z" />
    <meta property="article:modified_time" content="2018-02-18T21:37:52.000Z" />
    <meta property="article:tag" content="Weekly Notes" />
    <meta property="article:tag" content="Kotlin" />
    <meta property="article:tag" content="CryptoTrader" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Weekly Notes (Feb 13th / Feb 19th, 2018)" />
    <meta name="twitter:description" content="I am quite happy. I managed to get quite a bit of work done on my personal projects. I also managed to publish two blog posts. As a starter, I finished writing My Thoughts on React Native. It ended up being quite a bit of an opinionated piece, even for" />
    <meta name="twitter:url" content="http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Preslav Rachev" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Weekly Notes, Kotlin, CryptoTrader" />
    <meta name="twitter:site" content="@preslavrachev" />
    <meta name="twitter:creator" content="@preslavrachev" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Preslav&#x27;s Thoughts and Ramblings",
        "logo": {
            "@type": "ImageObject",
            "url": "http://www.preslav.me/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Preslav Rachev",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/fd47e6bba1f42ecacf2e7af9e4c5fb52?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "http://www.preslav.me/author/preslav/",
        "sameAs": [
            "https://twitter.com/preslavrachev"
        ]
    },
    "headline": "Weekly Notes (Feb 13th / Feb 19th, 2018)",
    "url": "http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/",
    "datePublished": "2018-02-18T17:26:33.000Z",
    "dateModified": "2018-02-18T21:37:52.000Z",
    "keywords": "Weekly Notes, Kotlin, CryptoTrader",
    "description": "I am quite happy. I managed to get quite a bit of work done on my personal projects. I also managed to publish two blog posts. As a starter, I finished writing My Thoughts on React Native. It ended up being quite a bit of an opinionated piece, even for",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://www.preslav.me/"
    }
}
    </script>

    <script type="text/javascript" src="/public/ghost-sdk.min.js?v=f593a58c15"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "69f974d18b04"
});
</script>
    <meta name="generator" content="Ghost 1.10" />
    <link rel="alternate" type="application/rss+xml" title="Preslav&#x27;s Thoughts and Ramblings" href="http://www.preslav.me/rss/" />
    <meta name="google-site-verification" content="VMxZ-AarPGjZ4X9IF5BEDXBi0hhGaj-S_Y_dj8WaAOE" />

<style>
    #disqus_thread {
        width: 80%;
        max-width: 710px;
        margin: 3rem auto 0;
    }
    
    #hellobar-bar .hb-close-wrapper {
    	display: block #important;
	}
</style>

</head>
<body class="post-template tag-weekly-notes tag-kotlin tag-cryptotrader">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="http://www.preslav.me">Preslav&#x27;s Thoughts and Ramblings</a>
            <ul class="nav">
    <li class="nav-home" role="presentation"><a href="http://www.preslav.me">Home</a></li>
    <li class="nav-micro" role="presentation"><a href="http://micro.preslav.me/">Micro</a></li>
    <li class="nav-about-me" role="presentation"><a href="http://www.preslav.me/about-me/">About Me</a></li>
    <li class="nav-my-work" role="presentation"><a href="http://www.preslav.me/work/">My Work</a></li>
    <li class="nav-contact" role="presentation"><a href="http://www.preslav.me/contact/">Contact</a></li>
</ul>
    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-tw" href="https://twitter.com/preslavrachev" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
        </div>
            <a class="rss-button" href="http://cloud.feedly.com/#subscription/feed/http://www.preslav.me/rss/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-weekly-notes tag-kotlin tag-cryptotrader no-image">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2018-02-18">18 February 2018</time>
                        <span class="date-divider">/</span> <a href="/tag/weekly-notes/">Weekly Notes</a>
                </section>
                <h1 class="post-full-title">Weekly Notes (Feb 13th / Feb 19th, 2018)</h1>
            </header>


            <section class="post-full-content">
                <div class="kg-card-markdown"><p>I am quite happy. I managed to get quite a bit of work done on my personal projects. I also managed to publish two blog posts.</p>
<p>As a starter, I finished writing <a href="http://www.preslav.me/2018/01/07/my-thoughts-on-react-native/">My Thoughts on React Native</a>. It ended up being quite a bit of an opinionated piece, even for my taste, but it is what is. The post is out there, so feel free to check it out, and i will be happy to get your feedback on it.</p>
<hr>
<h2 id="projectwork">Project Work</h2>
<h3 id="cryptotrader">CryptoTrader</h3>
<p>This week I dusted off my <a href="https://github.com/preslavrachev/cryptotrader">CryptoTrader</a> algotrading project. I started <a href="https://github.com/preslavrachev/cryptotrader/issues/24">working on a feature</a> I've been kind of thinking about for a while, but somehow I did not get to sit down and implement it. When finished, it will allow for placing order pairs (BUY-SELL / SELL-BUY), with a single REST request. The first order will get executed immediately at the market rate (or placed as a limit order if price is specified). The second order will be stored locally, but not executed, until a confirmation gets received, about a successful trade after the first order. The API will be flexible enough to allow for setting a percentage margin (to not have to compute prices manually), as well provide a cancellation window (essentially, executing the second order at a given time, regardless of profit or loss).</p>
<p>This feature would allow essentially anyone running CryptoTrader to test new trading strategies without having to have them built as part of the application. I usually start my experiments by writing a quick and dirty Python script. If the script works well, I would eventually move the idea over to CryptoTrader. Having this feature on board, will allow me to do easier backtesting and figuring out the right parameters.</p>
<p>Enough about the feature, I wanted to demonstrate a couple of things I learned while working on it. The first one is a way to make a Kotlin enum de/serializable using Jackson. Normally, this should work out of the box, but Jackson will serialize enum values to their string name representations, which is not a best practice. Normally, one would map those values to numeric identifiers which will ideally remain unchanged. In this case, even if enum value names changed, this will not break the compatibility with API consumers.</p>
<pre><code>enum class PairType(@JsonValue val id: Long) {
    BUY_SELL(id = 1L),
    SELL_BUY(id = 2L)
    ;

    companion object {
        /**
         * JSON creator
         * NOTE: when giving the creator function parameter the same name as the underlying property we're about to
         * check, the method would not work. Changing the name (to @{link requestId} in this case) seems to have done the job
         *
         * @see &lt;a href=&quot;https://github.com/FasterXML/jackson-module-kotlin/issues/75&quot; /&gt;
         * @see &lt;a href=&quot;https://github.com/FasterXML/jackson-module-kotlin/issues/78&quot; /&gt;
         *
         * NOTE: Don't forget the @JvmStatic annotation, Jackson requires a proper
         * static JVM method.
         */
        @JsonCreator
        @JvmStatic
        fun fromId(requestId: Long): PairType {
            return values().first { it. id == requestId }
        }
    }
}
</code></pre>
<p>There is however a quirk, which seems to be Kotlin related, according to <a href="https://github.com/FasterXML/jackson-module-kotlin/issues/75">this</a> and <a href="https://github.com/FasterXML/jackson-module-kotlin/issues/78">this</a> issue on GitHub.</p>
<hr>
<h2 id="linksandotherresources">Links and other resources</h2>
<h3 id="links">Links</h3>
<p>More on what <strong>goroutines</strong> are: <a href="https://golangbot.com/goroutines/">https://golangbot.com/goroutines/</a></p>
<blockquote>
<p><em>Goroutines are <em><a href="https://golangbot.com/functions/"><em>functions</em></a></em> or <em><a href="https://golangbot.com/methods/"><em>methods</em></a></em> that run concurrently with other functions or methods. Goroutines can be thought of as light weight threads. The cost of creating a Goroutine is tiny when compared to a thread. Hence its common for Go applications to have thousands of Goroutines running concurrently.</em></p>
</blockquote>
<hr>
<h3 id="tweets">Tweets</h3>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Managed to implement goroutines in Swift using GCD. Took a while to figure out, but the implementation and usage ended up simple (and hopefully, correct).<a href="https://t.co/yGwFi65y1U">https://t.co/yGwFi65y1U</a> <a href="https://t.co/Si2pBZKRMl">pic.twitter.com/Si2pBZKRMl</a></p>&mdash; Chris Eidhof (@chriseidhof) <a href="https://twitter.com/chriseidhof/status/964479193546416128?ref_src=twsrc%5Etfw">February 16, 2018</a></blockquote>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">We&#39;re focusing our efforts on a great Twitter experience that&#39;s consistent across platforms. So, starting today the Twitter for Mac app will no longer be available for download, and in 30 days will no longer be supported.</p>&mdash; Twitter Support (@TwitterSupport) <a href="https://twitter.com/TwitterSupport/status/964635739517407232?ref_src=twsrc%5Etfw">February 16, 2018</a></blockquote></div>
            </section>


            <footer class="post-full-footer">

                <section class="author-card">
                        <img class="author-profile-image" src="//www.gravatar.com/avatar/fd47e6bba1f42ecacf2e7af9e4c5fb52?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Preslav Rachev" />
                    <section class="author-card-content">
                        <h4 class="author-card-name"><a href="/">Preslav Rachev</a></h4>
                            <p>Read <a href="/">more posts</a> by this author.</p>
                    </section>
                </section>
                <div class="post-full-footer-right">
                    <a class="author-card-button" href="/">Read More</a>
                </div>

            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card"
                            style="background-image: url(/content/images/2018/03/pablo-heimplatz-243278-unsplash.jpg)"
                >
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">&mdash; Preslav&#x27;s Thoughts and Ramblings &mdash;</small>
                        <h3 class="read-next-card-header-title"><a href="/tag/weekly-notes/">Weekly Notes</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="/2018/04/22/longest-running-distance-23-1km/">Longest Running Distance! (23.1km)</a></li>
                            <li><a href="/2018/04/01/weekly-bits-and-pieces/">Weekly Bits and Pieces</a></li>
                            <li><a href="/2018/03/19/weekly-notes-2/">Weekly Notes</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="/tag/weekly-notes/">See all 8 posts →</a>
                    </footer>
                </article>

                <article class="post-card post tag-bitcoin tag-cryptocurrencies tag-trading tag-ethereum no-image">
    <div class="post-card-content">
        <a class="post-card-content-link" href="/2018/02/25/one-thing-you-should-know-when-trading-altcoins-against-btc-or-eth/">
            <header class="post-card-header">
                    <span class="post-card-tags">bitcoin</span>
                <h2 class="post-card-title">One Thing You Should Know When Trading Altcoins Against BTC or ETH</h2>
            </header>
            <section class="post-card-excerpt">
                <p>When trading an altcoin against BTC or ETH, remember that looking at charts’ face-values is not going to depict the entire picture, unless you apply certain normalization.</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="//www.gravatar.com/avatar/fd47e6bba1f42ecacf2e7af9e4c5fb52?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Preslav Rachev" />
            <span class="post-card-author"><a href="/author/preslav/">Preslav Rachev</a></span>
        </footer>
    </div>
</article>

                <article class="post-card post tag-tips tag-programming tag-python tag-pandas tag-data-science no-image">
    <div class="post-card-content">
        <a class="post-card-content-link" href="/2018/02/16/pandas-finding-a-row-where-one-of-its-values-is-at-a-minimum-maximum/">
            <header class="post-card-header">
                    <span class="post-card-tags">Tips</span>
                <h2 class="post-card-title">[Pandas] Finding a Row Where One of Its Values Is at a Minimum/Maximum</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Often, we will want to get to get a specific row, which marks the minimum or maximum of one of its columns. Let's suppose we have the SF Salaries dataset from Kaggle. We</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="//www.gravatar.com/avatar/fd47e6bba1f42ecacf2e7af9e4c5fb52?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Preslav Rachev" />
            <span class="post-card-author"><a href="/author/preslav/">Preslav Rachev</a></span>
        </footer>
    </div>
</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://www.preslav.me">
            <span>Preslav&#x27;s Thoughts and Ramblings</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Weekly Notes (Feb 13th / Feb 19th, 2018)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Weekly%20Notes%20(Feb%2013th%20%2F%20Feb%2019th%2C%202018)&amp;url=http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=http://www.preslav.me/2018/02/18/weekly-notes-feb-13-feb-19-2018/"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://www.preslav.me">Preslav&#x27;s Thoughts and Ramblings</a> &copy; 2018</section>
                <nav class="site-footer-nav">
                    <a href="http://www.preslav.me">Latest Posts</a>
                    
                    <a href="https://twitter.com/preslavrachev" target="_blank">Twitter</a>
                    <a href="https://ghost.org" target="_blank">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js?v=f593a58c15"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>


    <!-- Matomo -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  setTimeout(function() {
    var u="//preslavrachev.innocraft.cloud/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  }, 5000);
</script>
<!-- End Matomo Code -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40565485-7', 'auto');
  ga('send', 'pageview');

</script>

<!-- disqus -->
<script>
    var article = $('.post-template main article');
    var disqusSite = 'preslav';
    if (article.length) {
        article.after('<div id="disqus_thread"></div>');
        (function() {
            var d = document, s = d.createElement('script');
            s.src = '//' + disqusSite + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    }
</script>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

</body>
</html>
